{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hamid/dev/react/task/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hamid/dev/react/task/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hamid/dev/react/task/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{withRouter}from'react-router-dom';import{useDispatch}from'react-redux';import{setUser}from'./../actions/user.js';import{setUserTasks}from'./../actions/task.js';import{loginUser}from'../services/userServices';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setemail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setpassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setloading=_useState6[1];var dispatch=useDispatch();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData,_yield$loginUser,status,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(!(email&&password)){_context.next=19;break;}formData={email:email,password:password};_context.prev=3;setloading(true);_context.next=7;return loginUser(formData);case 7:_yield$loginUser=_context.sent;status=_yield$loginUser.status;data=_yield$loginUser.data;console.log(data);if(status===200){dispatch(setUser(data.data.user));dispatch(setUserTasks(data.data.user.tasks));setloading(false);props.history.push(\"/calendar\");}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](3);setloading(false);case 17:_context.next=20;break;case 19:alert('Please fill in both email and password');case 20:case\"end\":return _context.stop();}}},_callee,null,[[3,14]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"col-12 col-sm-6 pt-5 mx-auto\",children:[/*#__PURE__*/_jsx(\"h3\",{class:\"text-center mb-5\",children:\"Task Management\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"basic-addon1\",children:\"@\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:email,onChange:function onChange(e){return setemail(e.target.value);},class:\"form-control\",placeholder:\"Email\",\"aria-label\":\"Email\",\"aria-describedby\":\"basic-addon1\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-12 mt-3\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"input-group-prepend\",children:/*#__PURE__*/_jsx(\"span\",{class:\"input-group-text\",id:\"basic-addon1\",children:\"P\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(e){return setpassword(e.target.value);},class:\"form-control\",placeholder:\"Password\",\"aria-label\":\"Password\",\"aria-describedby\":\"basic-addon1\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"col-12 mt-3\",children:/*#__PURE__*/_jsx(\"div\",{class:\"input-group mb-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"btn btn-success btn-block\",children:\"Login\"})})})]})})]})})});};export default withRouter(Login);","map":{"version":3,"sources":["/Users/hamid/dev/react/task/src/components/Login.jsx"],"names":["React","useState","withRouter","useDispatch","setUser","setUserTasks","loginUser","Login","props","email","setemail","password","setpassword","loading","setloading","dispatch","handleSubmit","e","preventDefault","formData","status","data","console","log","user","tasks","history","push","alert","target","value"],"mappings":"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","sourcesContent":["import React,{useState} from 'react';\nimport {withRouter} from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport {setUser} from './../actions/user.js';\nimport {setUserTasks} from './../actions/task.js';\nimport { loginUser } from '../services/userServices';\n\nconst Login = (props) => {\n    const [email, setemail] = useState('');\n    const [password, setpassword] = useState('');\n    const [loading, setloading] = useState(false);\n    const dispatch = useDispatch();\n    const handleSubmit = async (e)=>{\n        e.preventDefault();\n        if(email && password){\n            const formData = {\n                email,\n                password,\n            };\n            try {\n                setloading(true);\n                const { status, data } = await loginUser(formData);\n                console.log(data);\n                if (status === 200) {\n                    dispatch(setUser(data.data.user));\n                    dispatch(setUserTasks(data.data.user.tasks));\n                    setloading(false);\n                    props.history.push(\"/calendar\");\n                }\n            } catch (ex) {\n                setloading(false);\n            }\n        }else{\n            alert('Please fill in both email and password');\n        }\n       \n    }\n    return (\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-12 col-sm-6 pt-5 mx-auto\">\n                    <h3 class=\"text-center mb-5\">Task Management</h3>\n                    <form onSubmit={handleSubmit}>\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <div class=\"input-group\">\n                                <div class=\"input-group-prepend\">\n                                    <span class=\"input-group-text\" id=\"basic-addon1\">@</span>\n                                </div>\n                                <input type=\"text\"  value={email} onChange={e=>setemail(e.target.value)} class=\"form-control\" placeholder=\"Email\" aria-label=\"Email\" aria-describedby=\"basic-addon1\" />\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"input-group mb-3\">\n                                <div class=\"input-group-prepend\">\n                                    <span class=\"input-group-text\" id=\"basic-addon1\">P</span>\n                                </div>\n                                <input type=\"password\" value={password} onChange={e=>setpassword(e.target.value)}  class=\"form-control\" placeholder=\"Password\" aria-label=\"Password\" aria-describedby=\"basic-addon1\" />\n                            </div>\n                        </div>\n                        <div class=\"col-12 mt-3\">\n                            <div class=\"input-group mb-3\">\n                                <button type=\"submit\" class=\"btn btn-success btn-block\" >Login</button>\n                            </div>\n                        </div>\n                    </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}